{"version":3,"sources":["model/module.entity.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,qCAA2D;AAC3D,+CAAqC;AACrC,2DAAiD;AACjD,+CAAqC;AAQrC,IAAa,MAAM,GAAnB;CAgCC,CAAA;AA1BG;IAJC,uBAAa,CAAC;QACX,IAAI,EAAE,OAAO;QACb,MAAM,EAAE,GAAG;KACd,CAAC;;qCACY;AAQd;IALC,mBAAS,CAAC,IAAI,CAAC,EAAE,CAAC,8BAAU,EAAE,UAAU,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,EAAE;QAC5D,OAAO,EAAE,CAAC,QAAQ,CAAC;QACnB,IAAI,EAAE,KAAK;QACX,KAAK,EAAE,KAAK;KACf,CAAC;8BACW,KAAK;2CAAa;AAQ/B;IALC,mBAAS,CAAC,IAAI,CAAC,EAAE,CAAC,kBAAI,EAAE,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE;QAC1C,OAAO,EAAE,CAAC,QAAQ,CAAC;QACnB,IAAI,EAAE,KAAK;QACX,KAAK,EAAE,KAAK;KACf,CAAC;8BACK,KAAK;qCAAO;AAQnB;IALC,mBAAS,CAAC,IAAI,CAAC,EAAE,CAAC,kBAAI,EAAE,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE;QAC1C,OAAO,EAAE,CAAC,QAAQ,CAAC;QACnB,IAAI,EAAE,KAAK;QACX,KAAK,EAAE,KAAK;KACf,CAAC;8BACK,KAAK;qCAAO;AA9BV,MAAM;IADlB,gBAAM,CAAC,QAAQ,CAAC;GACJ,MAAM,CAgClB;AAhCY,wBAAM","file":"module.entity.js","sourcesContent":["import { Entity, OneToMany, PrimaryColumn } from \"typeorm\";\nimport { Func } from \"./func.entity\";\nimport { Permission } from \"./permission.entity\";\nimport { Role } from \"./role.entity\";\n\n/* 模块实体，这个模块实体主要用于存储权限\n   这个实体不提供写入接口，当用户中心模块启动时，扫描所有Module,获取其组件、控制器上的Permission定义\n   然后将模块与其对应的权限存储到数据库，所有的权限只能由模块本身装饰器提供，因为权限是写死在代码里的\n   当删除模块时也会删除其下所有权限\n*/\n@Entity(\"module\")\nexport class Module {\n\n    @PrimaryColumn({\n        name: \"token\",\n        length: 100\n    })\n    token: string;\n\n    /* 模块下存储的权限，级联删除被关闭，删除模块之前需要单独删除权限 */\n    @OneToMany(type => Permission, permission => permission.module, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    permissions: Array<Permission>;\n\n    /* 模块下的功能，删除模块之前需要单独删除功能，不能级联删除，因为功能被权限引用 */\n    @OneToMany(type => Func, func => func.module, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    funcs: Array<Func>;\n\n    /* 模块下的角色，模块删除前需要单独删除角色，不能级联删除，因为角色被功能引用*/\n    @OneToMany(type => Role, role => role.module, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    roles: Array<Role>;\n\n}\n"]}