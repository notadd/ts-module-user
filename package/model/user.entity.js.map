{"version":3,"sources":["model/user.entity.ts"],"names":[],"mappings":"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","file":"user.entity.js","sourcesContent":["import { Column, Entity, JoinTable, ManyToMany, OneToMany, PrimaryGeneratedColumn } from \"typeorm\";\nimport { InfoItem } from \"./info.item.entity\";\nimport { Organization } from \"./organization.entity\";\nimport { Permission } from \"./permission.entity\";\nimport { Role } from \"./role.entity\";\nimport { Score } from \"./score.entity\";\nimport { UserInfo } from \"./user.info.entity\";\n\n/* 用户实体类，id自动生成、用户名必须唯一\n   用户可以属于多个组织，也可以不属于组织，为自由用户\n   用户拥有多个角色、进而拥有其下的权限\n   用户还可以单独指定增加、减少的权限，用来对角色权限做补充\n*/\n@Entity(\"user\")\nexport class User {\n\n    @PrimaryGeneratedColumn()\n    id: number;\n\n    /* 用户名，不能重复 */\n    @Column({\n        length: \"20\",\n        unique: true\n    })\n    userName: string;\n\n    /* 用户密码，为加盐密码 */\n    @Column({\n        length: 70,\n        nullable: true\n    })\n    password: string;\n\n    /* 密码的盐，10位随机字符串 */\n    @Column({\n        name: \"salt\",\n        length: 10,\n        nullable: true\n    })\n    salt: string;\n\n    /* 状态，是否封禁 */\n    @Column()\n    status: boolean;\n\n    /* 状态，是否处于回收站 */\n    @Column()\n    recycle: boolean;\n\n    /* 用户所包含信息，为调用信息组生成的信息 */\n    @OneToMany(type => UserInfo, userInfo => userInfo.user, {\n        cascade: [\"insert\", \"update\"],\n        lazy: false,\n        eager: false\n    })\n    userInfos: Array<UserInfo>;\n\n    /* 用户的各个积分值 */\n    @OneToMany(type => Score, score => score.user, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    scores: Array<Score>;\n\n    /* 用户已经填写的信息项，用户只保存与用户信息以及信息项的关系，不保存与信息组的关系*/\n    @ManyToMany(type => InfoItem, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    @JoinTable({\n        name: \"user_infoitem\"\n    })\n    infoItems: Array<InfoItem>;\n\n    /* 用户添加的权限 */\n    @ManyToMany(type => Permission, permission => permission.addUsers, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    @JoinTable({\n        name: \"user_adds_permission\"\n    })\n    adds: Array<Permission>;\n\n    /* 用户减少的权限 */\n    @ManyToMany(type => Permission, permission => permission.reduceUsers, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    @JoinTable({\n        name: \"user_reduces_permission\"\n    })\n    reduces: Array<Permission>;\n\n    /* 用户拥有的角色 */\n    @ManyToMany(type => Role, role => role.users, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    @JoinTable({\n        name: \"user_role\"\n    })\n    roles: Array<Role>;\n\n    /* 用户所属组织 */\n    @ManyToMany(type => Organization, organization => organization.users, {\n        cascade: [\"insert\"],\n        lazy: false,\n        eager: false\n    })\n    @JoinTable({\n        name: \"organization_user\"\n    })\n    organizations: Array<Organization>;\n}\n"]}