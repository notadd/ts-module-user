{"version":3,"sources":["resolver/info.group.resolver.ts"],"names":[],"mappings":"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","file":"info.group.resolver.js","sourcesContent":["import { HttpException, Inject, UseInterceptors } from \"@nestjs/common\";\nimport { Mutation, Query, Resolver } from \"@nestjs/graphql\";\nimport { IncomingMessage } from \"http\";\nimport { ExceptionInterceptor } from \"../interceptor/exception.interceptor\";\nimport { Data } from \"../interface/data\";\nimport { InfoGroupsData } from \"../interface/infoGroup/info.groups.data\";\nimport { InfoItemsData } from \"../interface/infoGroup/info.items.data\";\nimport { InfoGroupService } from \"../service/info.group.service\";\n\n/* 这个几个接口只是写在这，使用上还有很多问题 */\n@Resolver(\"InfoGroup\")\n@UseInterceptors(ExceptionInterceptor)\nexport class InfoGroupResolver {\n\n    constructor(\n        @Inject(InfoGroupService) private readonly infoGroupService: InfoGroupService\n    ) {\n    }\n\n    @Query(\"infoGroups\")\n    async infoGroups(): Promise<InfoGroupsData> {\n        const infoGroups = await this.infoGroupService.getAll();\n        return { code: 200, message: \"获取所有信息组成功\", infoGroups };\n    }\n\n    @Query(\"infoItems\")\n    async infoItems(req: IncomingMessage, body: { id: number }): Promise<InfoItemsData> {\n        const { id } = body;\n        if (!id) {\n            throw new HttpException(\"缺少参数\", 400);\n        }\n        const infoItems: any = await this.infoGroupService.getInfoItems(id);\n        return { code: 200, message: \"获取指定信息组的信息项成功\", infoItems };\n    }\n\n    @Mutation(\"createInfoGroup\")\n    async createInfoGroup(req: IncomingMessage, body: { name: string }): Promise<Data> {\n        const { name } = body;\n        if (!name) {\n            throw new HttpException(\"缺少参数\", 400);\n        }\n        await this.infoGroupService.createInfoGroup(name);\n        return { code: 200, message: \"创建信息组成功\" };\n    }\n\n    @Mutation(\"updateInfoGroup\")\n    async updateInfoGroup(req: IncomingMessage, body: { id: number, name: string }): Promise<Data> {\n        const { id, name } = body;\n        if (!id || !name) {\n            throw new HttpException(\"缺少参数\", 400);\n        }\n        await this.infoGroupService.updateInfoGroup(id, name);\n        return { code: 200, message: \"更新信息组成功\" };\n    }\n\n    @Mutation(\"deleteInfoGroup\")\n    async deleteInfoGroup(req: IncomingMessage, body: { id: number }): Promise<Data> {\n        const { id } = body;\n        if (!id) {\n            throw new HttpException(\"缺少参数\", 400);\n        }\n        await this.infoGroupService.deleteInfoGroup(id);\n        return { code: 200, message: \"删除信息组成功\" };\n    }\n\n    @Mutation(\"addInfoItem\")\n    async addInfoItem(req: IncomingMessage, body: { id: number, infoItemId: number }): Promise<Data> {\n        const { id, infoItemId } = body;\n        if (!id || !infoItemId) {\n            throw new HttpException(\"缺少参数\", 400);\n        }\n        await this.infoGroupService.addInfoItem(id, infoItemId);\n        return { code: 200, message: \"添加信息项成功\" };\n    }\n\n    @Mutation(\"removeInfoItem\")\n    async removeInfoItem(req: IncomingMessage, body: { id: number, infoItemId: number }): Promise<Data> {\n        const { id, infoItemId } = body;\n        if (!id || !infoItemId) {\n            throw new HttpException(\"缺少参数\", 400);\n        }\n        await this.infoGroupService.removeInfoItem(id, infoItemId);\n        return { code: 200, message: \"移除信息项成功\" };\n    }\n}\n"]}